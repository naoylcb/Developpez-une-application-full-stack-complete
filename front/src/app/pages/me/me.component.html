<div class="flex flex-col items-center m-10">
  <h2>Profil utilisateur</h2>
  <form
    [formGroup]="userForm"
    (ngSubmit)="onSubmit()"
    class="flex flex-col justify-center items-center"
  >
    <mat-form-field appearance="outline">
      <mat-label>Nom d'utilisateur</mat-label>
      <input matInput formControlName="username" type="text" required />

      <mat-error *ngIf="userForm.get('username')?.hasError('required')"
        >Ce champ est requis</mat-error
      >
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Adresse e-mail</mat-label>
      <input matInput formControlName="email" type="email" required />

      <mat-error *ngIf="userForm.get('email')?.hasError('required')"
        >Ce champ est requis</mat-error
      >
      <mat-error *ngIf="userForm.get('email')?.hasError('email')"
        >Entrez une adresse e-mail valide</mat-error
      >
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Mot de passe</mat-label>
      <input matInput formControlName="password" type="password" />

      <mat-error *ngIf="userForm.get('password')?.hasError('pattern')"
        >Le mot de passe doit contenir au moins 8 caractères, une lettre
        majuscule, une lettre minuscule, un chiffre et un caractère
        spécial</mat-error
      >
    </mat-form-field>

    <button
      mat-raised-button
      color="primary"
      type="submit"
      [disabled]="!userForm.valid"
    >
      Sauvegarder
    </button>
  </form>

  <a (click)="logout()" class="mt-5 text-red-700 cursor-pointer"
    >Se déconnecter</a
  >

  <hr class="w-full my-5 border-black" />

  <h2>Abonnements</h2>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <div *ngFor="let topic of topics">
      <app-topic-card
        [topic]="topic"
        [text]="topicButtonText"
        (action)="unsubscribe($event)"
      ></app-topic-card>
    </div>
  </div>
</div>
